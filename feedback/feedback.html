<!-- filename: feedback/feedback.html -->
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="robots" content="noindex, nofollow"/>
  <title>Feedback – KI-Status-Report</title>
  <style>
    body{font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;background:#f7f9fb;color:#0d2b4a;margin:0;padding:2rem}
    main{max-width:800px;margin:0 auto}
    label{display:block;margin-top:1rem;font-weight:600}
    input,textarea{width:100%;padding:.7rem;border:1px solid #cbd5e1;border-radius:8px}
    button{background:#003b5a;color:#fff;border:none;border-radius:8px;padding:.8rem 1.2rem;margin-top:1rem;cursor:pointer}
    .ok{color:#0a7f3f}
  </style>
  <script src="../js/api.js" defer></script>
</head>
<body>
<main>
  <h1>Feedback</h1>
  <p>Danke fürs Mitmachen. Dein Feedback hilft uns, das System zu verbessern.</p>
  <form id="f">
    <label>Name (optional)<input name="name"/></label>
    <label>E‑Mail<input name="email" type="email" required/></label>
    <label>Nachricht<textarea name="message" rows="5" required></textarea></label>
    <button type="submit">Absenden</button>
  </form>
  <p id="status"></p>
</main>
<script>
  const form = document.getElementById('f');
  const statusEl = document.getElementById('status');
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    statusEl.textContent = 'Sende…';
    const fd = new FormData(form);
    try{
      const item = {
        name: fd.get('name') || '',
        email: fd.get('email'),
        message: fd.get('message'),
        context: { ua: navigator.userAgent }
      };
      await KIAPI.sendFeedback(item);
      statusEl.textContent = 'Danke! Wir haben dein Feedback erhalten.';
      statusEl.className = 'ok';
      form.reset();
    }catch(err){
      statusEl.textContent = 'Fehler: ' + (err?.message || err);
    }
  });
</script>
</body>
</html>

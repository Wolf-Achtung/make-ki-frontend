<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="robots" content="noindex, nofollow"/>
  <meta name="api-base" content="https://api-ki-backend-neu-production.up.railway.app/api">
  <title>Questionnaire – AI Status Report</title>
  <style>
    /* Card-based layout (Email-Design) */
    :root { --bg:#f7f9fb; --fg:#0d2b4a; --muted:#6b7280; }
    * { box-sizing:border-box; }
    body { font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif; background:var(--bg); color:var(--fg); margin:0; line-height:1.5; padding:2rem; }
    .app-shell { max-width:960px; margin:0 auto; }
    .auth-card { border-radius:10px; overflow:hidden; box-shadow:0 2px 12px rgba(13,43,74,0.08); border:1px solid #e0e7f0; background:#ffffff; }
    .auth-card-header { background:#1a5f87; color:#ffffff; padding:20px; text-align:center; }
    .auth-card-title { font-family:'Share Tech Mono', monospace; font-size:1.6rem; margin:0; font-weight:400; }
    .auth-card-body { padding:30px 32px 26px; }
    .muted { color:var(--muted); }
    /* Language Switch */
    .lang-switch { display:flex; justify-content:flex-end; gap:8px; align-items:center; font-size:14px; margin-bottom:8px; }
    .lang-link { text-decoration:none; color:#2563eb; font-weight:500; }
    .lang-link:hover { text-decoration:underline; }
    .lang-active { font-weight:700; text-decoration:underline; }
    .lang-separator { color:#64748b; }
    /* Header & Progress */
    .head { display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:10px; }
    .headline { font-size:1.8rem; font-weight:700; color:#0d2b4a; margin:0; }
    .progress { font-size:0.95rem; color:#35597a; background:#e7f0fb; padding:6px 12px; border-radius:999px; }
  </style>
  <script src="/js/config.js"></script>
  <script src="/js/auth.js"></script>
</head>
<body>
<div class="app-shell">
  <div class="auth-card">
    <header class="auth-card-header">
      <h1 class="auth-card-title">KI-Sicherheit.jetzt</h1>
    </header>
    <div class="auth-card-body">
      <div class="lang-switch">
        <a href="index.html?lang=de" class="lang-link">DE</a>
        <span class="lang-separator">|</span>
        <a href="index_en.html?lang=en" class="lang-link lang-active">EN</a>
      </div>
      <div class="head">
        <h1 class="headline">Questionnaire</h1>
        <span class="progress" id="fb-progress" aria-live="polite"></span>
      </div>
      <div id="formbuilder"></div>
    </div><!-- /.auth-card-body -->
  </div><!-- /.auth-card -->
</div><!-- /.app-shell -->

<script>
  // Auth-Guard: check for auth cookie (quick check)
  (function(){
    try {
      if (window.AUTH && !window.AUTH.hasAuthCookie()) {
        location.href = '/login.html';
      }
    } catch(_) {}
  })();

  // Progress display from formbuilder (formbuilder_en_SINGLE_FULL.js dispatches fb:progress)
  document.addEventListener('fb:progress', function(e){
    var el = document.getElementById('fb-progress');
    if (!el || !e || !e.detail) return;
    el.textContent = 'Step ' + e.detail.step + ' / ' + e.detail.total;
  });
</script>

<script src="formbuilder_en_SINGLE_FULL.js"></script>

<!-- Language redirect: ?lang=de → DE page -->
<script>
  (function() {
    try {
      var params = new URLSearchParams(window.location.search);
      var lang = (params.get('lang') || 'en').toLowerCase();
      if (lang === 'de') {
        window.location.href = 'index.html?lang=de';
      }
    } catch (e) {
      console.warn('Lang switch (EN) failed:', e);
    }
  })();
</script>
</body>
</html>

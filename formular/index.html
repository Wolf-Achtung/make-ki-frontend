<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>KI-Readiness & Förderung</title>
    <style>
        body { font-family: sans-serif; max-width: 700px; margin: 2rem auto; color: #003366; }
        h1, h2 { color: #003366; }
        select, input { width: 100%; padding: 0.5rem; margin-bottom: 1rem; }
        button { padding: 0.5rem 1rem; background: #003366; color: white; border: none; cursor: pointer; }
        button:hover { background: #0055aa; }
        pre { background: #f0f0f0; padding: 1rem; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>Förderfähigkeit & KI-Readiness prüfen</h1>
    <form id="briefingForm">
        <input type="text" name="unternehmen" placeholder="Unternehmen" required>
        <input type="text" name="name" placeholder="Ihr Name" required>
        <input type="email" name="email" placeholder="E-Mail" required>

        <select name="branche" required>
            <option value="">Bitte Branche auswählen</option>
            <option>Finanzen & Steuern</option>
            <option>Medien & Marketing</option>
            <option>Kommunikation & PR</option>
            <option>Bildung & Coaching</option>
            <option>Verwaltung & Öffentliche Hand</option>
            <option>Handel & E-Commerce</option>
            <option>IT & Software</option>
            <option>Sonstige</option>
        </select>

        <select name="massnahme" required>
            <option value="">Geplante Maßnahme wählen</option>
            <option>Beratung / Strategie</option>
            <option>Risikoanalyse</option>
            <option>Datenschutz / Compliance</option>
            <option>KI-Tool-Integration, z.B. KI-Agents</option>
            <option>Mitarbeiterschulung / Change Management</option>
            <option>noch unklar</option>
        </select>

        <select name="bereich" required>
            <option value="">Bereich auswählen</option>
            <option>Marketing</option>
            <option>Vertrieb</option>
            <option>Geschäftsführung</option>
            <option>Personal</option>
            <option>Produktion</option>
            <option>Sonstige</option>
        </select>

        <h2>Datenschutz & KI-Management</h2>
        <label>Haben Sie technische Maßnahmen getroffen, z. B. Verschlüsselung, Firewalls oder Zugriffskontrollen?</label>
        <select name="frage1"><option>nein</option><option>ja</option><option>noch unklar</option></select>

        <label>Gibt es Schulungen oder Infos für Mitarbeiter zu Datenschutz, KI oder rechtlichen Anforderungen?</label>
        <select name="frage2"><option>nein</option><option>ja</option><option>noch unklar</option></select>

        <label>Haben Sie einen Datenschutzbeauftragten oder Verantwortlichen benannt?</label>
        <select name="frage3"><option>nein</option><option>ja</option><option>noch unklar</option></select>

        <label>Haben Sie Risiken für den Datenschutz dokumentiert (z. B. Datenschutz-Folgenabschätzung)?</label>
        <select name="frage4"><option>nein</option><option>ja</option><option>noch unklar</option></select>

        <label>Gibt es Regeln zur Löschung oder Anonymisierung von personenbezogenen Daten?</label>
        <select name="frage5"><option>nein</option><option>ja</option><option>noch unklar</option></select>

        <label>Wissen Ihre Mitarbeiter, was bei einer Datenschutzverletzung zu tun ist?</label>
        <select name="frage6"><option>nein</option><option>ja</option><option>noch unklar</option></select>

        <label>Achten Sie darauf, dass Personen ihre Rechte (Auskunft, Löschung, Berichtigung) wahrnehmen können?</label>
        <select name="frage7"><option>nein</option><option>ja</option><option>noch unklar</option></select>

        <label>Haben Sie Prozesse zur regelmäßigen Löschung oder Anonymisierung unnötiger Daten?</label>
        <select name="frage8"><option>nein</option><option>ja</option><option>noch unklar</option></select>

        <label>Gibt es eine Meldepflicht und klare Abläufe für Datenschutzvorfälle?</label>
        <select name="frage9"><option>nein</option><option>ja</option><option>noch unklar</option></select>

        <label>Führen Sie regelmäßige Überprüfungen oder Audits zur Datenschutzkonformität durch?</label>
        <select name="frage10"><option>nein</option><option>ja</option><option>noch unklar</option></select>

        <button type="submit">Briefing erstellen</button>
    </form>

    <div id="result" style="margin-top:2rem;"></div>
    <div id="debug" style="margin-top:2rem;"></div>

    <script>
        document.getElementById('briefingForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const data = Object.fromEntries(new FormData(e.target));
            const res = await fetch("https://make-ki-backend-neu-production.up.railway.app/briefing", {
                method: 'POST', headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            const json = await res.json();

            document.getElementById('result').innerHTML = `
                <h2>Ihr persönliches KI-Briefing</h2>
                <strong>Score:</strong> ${json.compliance_score ?? 0}/10<br>
                <strong>Badge:</strong> ${json.badge_level ?? 'Bronze'}<br><br>
                <strong>Readiness:</strong> ${json.readiness_analysis || 'Keine Daten verfügbar'}<br><br>
                <strong>Compliance:</strong> ${json.compliance_analysis || 'Keine Daten verfügbar'}<br><br>
                <strong>Use Case:</strong> ${json.use_case_analysis || 'Keine Daten verfügbar'}<br><br>
                <strong>Branche Trend:</strong> ${json.branche_trend || 'Keine Daten verfügbar'}<br><br>
                <strong>Vision:</strong> ${json.vision || 'Keine Daten verfügbar'}<br><br>
                <strong>Toolstipps:</strong> ${json.toolstipps?.join(", ") || 'Keine Daten verfügbar'}<br><br>
                <strong>Fördertipps:</strong> ${json.foerdertipps?.join(", ") || 'Keine Daten verfügbar'}<br><br>
                <strong>Executive Summary:</strong> ${json.executive_summary || 'Keine Daten verfügbar'}
            `;

            document.getElementById('debug').innerHTML = `<h3>Rohdaten (Debug)</h3><pre>${JSON.stringify(json, null, 2)}</pre>`;
        });
    </script>
</body>
</html>

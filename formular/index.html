<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>KI-Readiness & Executive Report</title>
<style>
  body {
    font-family: 'IBM Plex Mono', monospace;
    background-color: #f7f9fb;
    color: #0d2b4a;
    padding: 2rem;
    max-width: 900px;
    margin: auto;
  }
  h1, h2 {
    color: #0d2b4a;
  }
  label {
    font-weight: bold;
    margin-bottom: 0.4rem;
    display: block;
    max-width: 600px;
  }
  input, select, textarea {
    width: 100%;
    max-width: 600px;
    box-sizing: border-box;
    padding: 0.6rem;
    margin-top: 0.4rem;
    margin-bottom: 1.4rem;
    border: 2px solid #0d2b4a;
    border-radius: 6px;
    font-size: 1rem;
    background-color: #ffffff;
    color: #0d2b4a;
    display: block;
  }
  textarea {
    height: 80px;
  }
  button {
    background-color: #003b5a;
    color: white;
    border: none;
    padding: 0.8rem 1.2rem;
    font-size: 1rem;
    border-radius: 8px;
    cursor: pointer;
    width: 100%;
    max-width: 600px;
  }
  button:hover {
    background-color: #005080;
  }
</style>

</head>
<body>

<h1>KI-Readiness & Datenschutz-Check</h1>
<p>Bitte beantworten Sie die folgenden Fragen für ein maßgeschneidertes <br>Ergebnis mit praxisnahen Empfehlungen möglichst genau. </p>

<h2>Unternehmensdaten</h2>
<label>E-Mail
<input type="email" name="email" required></label>
<label>Name
<input type="text" name="name" required></label>
<label>Unternehmen
<input type="text" name="unternehmen" required></label>
<label>Branche
<select name="branche">
  <option>Bitte Branche auswählen</option><option>Finanzen & Steuern</option><option>Medien & Marketing</option><option>Kommunikation & PR</option><option>Bildung & Coaching</option><option>Verwaltung & Öffentliche Hand</option><option>Handel & E-Commerce</option><option>IT & Software</option><option>Sonstige</option>
</select></label>
<label>Geplanter Einsatzbereich
<select name="bereich">
  <option>Bereich auswählen</option><option>Marketing</option><option>Vertrieb</option><option>Geschäftsführung</option><option>Personal</option><option>Produktion</option><option>Sonstige</option>
</select></label>
<label>Geplante Maßnahme
<select name="massnahme">
  <option>Geplante Maßnahme wählen</option><option>Beratung / Strategie</option><option>Risikoanalyse</option><option>Datenschutz / Compliance</option><option>KI-Tool-Integration</option><option>Mitarbeiterschulung / Change Management</option><option>noch unklar</option>
</select></label>
<label>Mitarbeiterzahl
<select name="mitarbeiterzahl">
  <option>Mitarbeiterzahl wählen</option><option>1-5</option><option>6-20</option><option>21-99</option><option>mehr als 100</option>
</select></label>
<label>Was bieten Sie konkret an? (Produkte / Dienstleistungen)
<input type="text" name="produkt_dienstleistung" placeholder="z. B. Webdesign, Zahnarztpraxis, Maschinenbau" required></label>

<label>Sind Sie selbständig oder freiberuflich tätig?
<select name="selbststaendig" required>
  <option>Bitte auswählen</option>
  <option>Ja</option>
  <option>Nein</option>
</select></label>
<label>PLZ (für Förderung-Check)
<input type="text" name="plz" required></label>
<h2>Unternehmensfragen</h2>
<form id="mainForm">
<div class="section">
<label>Haben Sie technische Maßnahmen getroffen, z. B. Verschlüsselung, Firewalls oder Zugriffskontrollen?
<select name="frage1"><option>Bitte auswählen</option><option>Ja</option><option>Teilweise</option><option>Nein</option></select></label>
<label>Gibt es Schulungen oder Informationen für Mitarbeiter zu Datenschutz, KI oder rechtlichen Anforderungen?
<select name="frage2"><option>Bitte auswählen</option><option>Ja</option><option>Teilweise</option><option>Nein</option></select></label>
<label>Haben Sie einen Datenschutzbeauftragten oder Verantwortlichen benannt?
<select name="frage3"><option>Bitte auswählen</option><option>Ja</option><option>Nein</option></select></label>
<label>Haben Sie Risiken z. B. durch eine Datenschutz-Folgenabschätzung geprüft?
<select name="frage4"><option>Bitte auswählen</option><option>Ja</option><option>Teilweise</option><option>Nein</option></select></label>
<label>Gibt es feste Regeln zur Löschung oder Anonymisierung personenbezogener Daten?
<select name="frage5"><option>Bitte auswählen</option><option>Ja</option><option>Teilweise</option><option>Nein</option></select></label>
<label>Wissen Ihre Mitarbeiter, was bei einer Datenschutzverletzung zu tun ist?
<select name="frage6"><option>Bitte auswählen</option><option>Ja</option><option>Teilweise</option><option>Nein</option></select></label>
<label>Achten Sie darauf, dass Betroffene ihre Rechte wahrnehmen können (Auskunft, Löschung etc.)?
<select name="frage7"><option>Bitte auswählen</option><option>Ja</option><option>Teilweise</option><option>Nein</option></select></label>
<label>Gibt es eine Dokumentation der Datenverarbeitung?
<select name="frage8"><option>Bitte auswählen</option><option>Ja</option><option>Teilweise</option><option>Nein</option></select></label>
<label>Existieren Meldepflichten und klare Abläufe bei Datenschutzvorfällen?
<select name="frage9"><option>Bitte auswählen</option><option>Ja</option><option>Teilweise</option><option>Nein</option></select></label>
<label>Führen Sie regelmäßige Überprüfungen oder Audits durch?
<select name="frage10"><option>Bitte auswählen</option><option>Ja</option><option>Teilweise</option><option>Nein</option></select></label>
</div>

<div class="section">
<h2>Business & Strategie Fragen</h2>
<label>Was sind Ihre größten Herausforderungen?
<select name="herausforderungen"><option>Bitte auswählen</option><option>Fachkräftemangel</option><option>Kosten senken</option><option>Wachstum & Skalierung</option><option>Effizienz steigern</option><option>Innovation vorantreiben</option><option>Sonstige</option></select>
<textarea name="herausforderungen_sonstiges" placeholder="Falls Sonstige, bitte hier angeben"></textarea></label>
<label>Wo möchten Sie in 3 Jahren stehen?
<select name="ziele_3jahre"><option>Bitte auswählen</option><option>Marktführer werden</option><option>Neue Märkte erschließen</option><option>KI-gestützt automatisieren</option><option>Mehr Umsatz / Kunden</option><option>Sonstige</option></select>
<textarea name="ziele_3jahre_sonstiges" placeholder="Falls Sonstige, bitte hier angeben"></textarea></label>
<label>Welche IT-Tools nutzen Sie?
<select name="it_systeme"><option>Bitte auswählen</option><option>HubSpot</option><option>Lexoffice</option><option>Google Workspace</option><option>Microsoft 365</option><option>Sonstige</option></select>
<textarea name="it_systeme_sonstiges" placeholder="Falls Sonstige, bitte hier angeben"></textarea></label>
<label>Nutzen Sie KI-Tools? Welche?
<select name="ki_tools"><option>Bitte auswählen</option><option>ChatGPT</option><option>Jasper</option><option>Midjourney</option><option>keine</option><option>Sonstige</option></select>
<textarea name="ki_tools_sonstiges" placeholder="Falls Sonstige, bitte hier angeben"></textarea></label>
<label>Welche Zielgruppen bedienen Sie?
<select name="zielgruppen"><option>Bitte auswählen</option><option>B2B Mittelstand</option><option>Endkunden (B2C)</option><option>Öffentliche Hand</option><option>Internationale Märkte</option><option>Sonstige</option></select>
<textarea name="zielgruppen_sonstiges" placeholder="Falls Sonstige, bitte hier angeben"></textarea></label>
<label>Gab es Datenschutzvorfälle/Audits?
<select name="vorfaelle"><option>Bitte auswählen</option><option>Ja, Vorfall</option><option>Ja, Audit</option><option>Nein</option></select>
<textarea name="vorfaelle_sonstiges" placeholder="Falls Details, bitte hier angeben"></textarea></label>
<label>Größte Automatisierungspotenziale?
<select name="innovation_potentiale"><option>Bitte auswählen</option><option>Angebotserstellung</option><option>Kundenservice</option><option>Marketingprozesse</option><option>Produktion/Logistik</option><option>Sonstige</option></select>
<textarea name="automation_sonstiges" placeholder="Falls Sonstige, bitte hier angeben"></textarea></label>
<label>Was wäre ein echter Moonshot?
<select name="moonshot"><option>Bitte auswählen</option><option>Eigene KI-App entwickeln</option><option>International skalieren</option><option>100% Automatisierung</option><option>Neues Geschäftsmodell</option><option>Sonstige</option></select>
<textarea name="moonshot_sonstiges" placeholder="Falls Sonstige, bitte hier angeben"></textarea></label>
</div>

<div class="checkbox"><input type="checkbox" name="datenschutz" required> Ich akzeptiere die Datenschutzerklärung.</div>
<button type="submit">Analyse starten</button>
</form>

<div id="executiveReport" style="display:none;">
    <div style="text-align:center; margin-bottom:30px;">
        <img src="badges/ki-sicherheit-logo.png" alt="KI-Sicherheit Logo" style="height:90px;">
    </div>

    <h1>Executive Briefing</h1>

    <h2>Status & Trust-Badge</h2>
    <p><strong>Compliance Score:</strong> <span id="score"></span>/10</p>
    <p><strong>Trust-Badge:</strong> <span id="badge" style="font-size:1.2em;"></span></p>

    <div style="margin-top:20px;">
        <strong>DSGVO Level:</strong>
        <div class="progress"><div id="dsGvoBar"></div></div>
        <small id="dsGvoLabel"></small>
    </div>
    <div style="margin-top:10px;">
        <strong>AI Act Level:</strong>
        <div class="progress"><div id="aiActBar"></div></div>
        <small id="aiActLabel"></small>
    </div>

    <h2>Risiko & Haftung</h2>
    <p id="risk"></p>

    <h2>Executive Summary</h2>
    <p id="summary"></p>

    <h2>Readiness & Strategie</h2>
    <p id="readiness"></p>

    <h2>Compliance & Datenschutz</h2>
    <p id="compliance"></p>

    <h2>Use Cases & Innovation</h2>
    <p id="usecase"></p>

    <h2>Branchentrends & Benchmarks</h2>
    <p id="trend"></p>

    <h2>Vision</h2>
    <p id="vision"></p>

    <h2>Priorisierte Next Steps</h2>
    <ul id="nextSteps"></ul>

    <h2>Toolstipps</h2>
    <ul id="tools"></ul>

    <h2>Fördertipps</h2>
    <ul id="foerder"></ul>

    <div class="dan-box">
        <h2>Moonshot-Inspiration</h2>
        <p id="dan"></p>
    </div>

    <div style="margin-top:50px; text-align:center;">
        <img src="badges/ki-ready-2025.png" alt="KI-Ready 2025" style="height:50px; margin-right:10px;">
        <img src="badges/dsgvo.svg" alt="DSGVO" style="height:50px; margin-right:10px;">
        <img src="badges/eu-ai.svg" alt="EU AI" style="height:50px;">
    </div>
<div id="loadingSpinner" style="display:none; text-align:center; margin:20px;">
  <div style="
    border:6px solid #f3f3f3;
    border-top:6px solid #3498db;
    border-radius:50%;
    width:50px;
    height:50px;
    animation:spin 1s linear infinite;
    margin:0 auto;
  "></div>
  <p>Bitte warten, Analyse läuft...</p>
</div>

<style>
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
</style>
<pre id="debugOutput" style="background:#f0f0f0; padding:1rem; border:1px solid #ccc; max-width:600px; overflow:auto;"></pre>

    <footer>
        <p><img src="badges/tuev-logo-transparent.png" alt="TÜV Zertifiziert" style="height:40px; vertical-align:middle; margin-right:8px;"> TÜV-zertifiziertes KI-Management, Wolf Hohl, 10405 Berlin &bull; E-Mail: kontakt@ki-sicherheit.jetzt</p>
        <p>Dieses Executive Briefing wurde automatisch auf Basis Ihrer Angaben erstellt und stellt keine rechtliche Beratung dar. Für die Richtigkeit und Vollständigkeit der Angaben wird keine Haftung übernommen.</p>
        <p>© 2025 KI-Sicherheit.jetzt</p>
    </footer>
</div>

<script>
document.getElementById("mainForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const debug = document.getElementById("debugOutput");
    const spinner = document.getElementById("loadingSpinner");
    const data = Object.fromEntries(new FormData(e.target));
    console.log("Formulardaten:", data);

    spinner.style.display = "block";
    debug.textContent = "⏳ Sende Daten an Server...\n" + JSON.stringify(data, null, 2);

    try {
        const res = await fetch("https://make-ki-backend-neu-production.up.railway.app/briefing", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify(data)
        });

        debug.textContent += "\n\n✅ Server antwortet mit Status: " + res.status;

        if (!res.ok) {
            const errText = await res.text();
            debug.textContent += "\n❌ Fehler im Server-Request: " + errText;
            spinner.style.display = "none";
            return;
        }

        const json = await res.json();
        console.log("Server JSON:", json);
        debug.textContent += "\n\n📦 Server JSON:\n" + JSON.stringify(json, null, 2);

        if (!json || typeof json !== "object" || !json.executive_report) {
            debug.textContent += "\n\n⚠️ JSON hat nicht die erwartete Struktur oder das Feld executive_report fehlt.";
            spinner.style.display = "none";
            return;
        }

        // Zusätzlich: Executive Report auch unten ausgeben
        debug.textContent += "\n\n📄 Executive Report (Plain):\n" + json.executive_report;

        document.getElementById("mainForm").style.display = "none";
        const reportBlock = document.getElementById("executiveReport");
        reportBlock.style.display = "block";
        reportBlock.innerHTML = "<h2>Executive Briefing</h2><div style='white-space: pre-wrap; line-height:1.6;'>" + json.executive_report + "</div>";

    } catch (err) {
        debug.textContent += "\n❌ Netzwerk- oder Serverfehler: " + err;
        console.error(err);
    }
    spinner.style.display = "none";
});
</script>



</body>
</html>
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>KI-Readiness & F√∂rderung</title>
  <style>
    body {
      font-family: 'IBM Plex Mono', monospace;
      background-color: #f7f9fb;
      color: #0d2b4a;
      padding: 2rem;
      max-width: 800px;
      margin: auto;
    }
    h1, h2, h3 {
      color: #0d2b4a;
    }
    input, select, textarea {
      width: 100%;
      padding: 0.6rem;
      margin-bottom: 1rem;
      border: 2px solid #0d2b4a;
      border-radius: 6px;
      font-size: 1rem;
      background-color: #ffffff;
      color: #0d2b4a;
    }
    label {
      font-weight: bold;
      margin-bottom: 0.2rem;
      display: block;
    }
    button {
      background-color: #003b5a;
      color: white;
      border: none;
      padding: 0.8rem 1.2rem;
      font-size: 1rem;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background-color: #005080;
    }
    .section {
      margin-bottom: 2rem;
    }
    .result-block {
      background: white;
      border-left: 5px solid #003b5a;
      padding: 1rem;
      border-radius: 6px;
      box-shadow: 0 0 4px rgba(0,0,0,0.1);
      margin: 1rem 0;
    }
    .success-highlight {
      background: #e0f4ff;
      padding: 1rem;
      border-radius: 6px;
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>

<h1>KI-Readiness & F√∂rderung pr√ºfen</h1>
<p><strong>Nutzen Sie bestehende F√∂rdermittel f√ºr Ihre KI-Vorhaben.</strong><br/>
Zusch√ºsse von 5.000 ‚Ç¨ bis √ºber 100.000 ‚Ç¨ sind m√∂glich. Wir pr√ºfen Ihre Chancen und geben Ihnen konkrete Handlungsempfehlungen.</p>

<form id="briefingForm">
  <div class="section">
    <label for="name">Name</label>
    <input id="name" name="name" type="text"/>

    <label for="email">E-Mail</label>
    <input id="email" name="email" type="email"/>

    <label for="branche">Branche</label>
    <select id="branche" name="branche">
      <option>Finanzen & Steuern</option>
      <option>Medien & Marketing</option>
      <option>Kommunikation & PR</option>
      <option>Bildung & Coaching</option>
      <option>Verwaltung & √ñffentliche Hand</option>
      <option>Handel & E-Commerce</option>
      <option>IT & Software</option>
      <option>Sonstige</option>
    </select>

    <label for="selbststaendig">Selbstst√§ndig t√§tig?</label>
    <select id="selbststaendig" name="selbststaendig">
      <option>Ja</option>
      <option>Nein</option>
    </select>

    <label for="massnahme">Geplante Ma√ünahme</label>
    <select id="massnahme" name="massnahme">
      <option>Bitte ausw√§hlen</option>
      <option>Beratung / Strategie</option>
      <option>Risikoanalyse</option>
      <option>Datenschutz / Compliance</option>
      <option>KI-Tool-Integration</option>
      <option>Mitarbeiterschulung / Change Management</option>
      <option>noch unklar</option>
    </select>

    <label for="bereich">Geplanter Einsatzbereich</label>
    <input id="bereich" name="bereich" type="text"/>

    <label for="ziel">Was m√∂chten Sie mit KI erreichen?</label>
    <textarea id="ziel" name="ziel"></textarea>
  </div>

  <div class="section">
    <h3>Compliance-Fragen (EU-AI-Act & DSGVO)</h3>
    <label for="frage1">Gibt es bereits interne Richtlinien zum KI-Einsatz?</label>
    <select id="frage1" name="frage1"><option>Ja</option><option>Teilweise</option><option>Nein</option></select>

    <label for="frage2">Werden personenbezogene Daten verarbeitet?</label>
    <select id="frage2" name="frage2"><option>Ja</option><option>Teilweise</option><option>Nein</option></select>

    <label for="frage3">Gibt es einen Datenschutzbeauftragten?</label>
    <select id="frage3" name="frage3"><option>Ja</option><option>Teilweise</option><option>Nein</option></select>

    <label for="frage4">Sind Mitarbeitende zu KI & Datenschutz geschult?</label>
    <select id="frage4" name="frage4"><option>Ja</option><option>Teilweise</option><option>Nein</option></select>

    <label for="frage5">Gibt es ein Verzeichnis von Verarbeitungst√§tigkeiten?</label>
    <select id="frage5" name="frage5"><option>Ja</option><option>Teilweise</option><option>Nein</option></select>

    <label for="frage6">Existieren AV-Vertr√§ge f√ºr externe KI-Dienste?</label>
    <select id="frage6" name="frage6"><option>Ja</option><option>Teilweise</option><option>Nein</option></select>

    <label for="frage7">Werden KI-Outputs auf Bias gepr√ºft?</label>
    <select id="frage7" name="frage7"><option>Ja</option><option>Teilweise</option><option>Nein</option></select>

    <label for="frage8">Existiert eine Notfallstrategie (Failsafe)?</label>
    <select id="frage8" name="frage8"><option>Ja</option><option>Teilweise</option><option>Nein</option></select>

    <label for="frage9">Gab es schon eine Datenschutz-Folgenabsch√§tzung (DPIA)?</label>
    <select id="frage9" name="frage9"><option>Ja</option><option>Teilweise</option><option>Nein</option></select>

    <label for="frage10">Wird dokumentiert, wann & wof√ºr KI genutzt wird?</label>
    <select id="frage10" name="frage10"><option>Ja</option><option>Teilweise</option><option>Nein</option></select>
  </div>

  <button type="submit">Jetzt pr√ºfen lassen</button>
</form>

<section id="resultSection" style="display:none;">
  <div class="success-highlight">
    üéâ <strong>Ihre individuelle KI-Analyse ist fertig!</strong>
    <p>Sehen Sie hier Ihre Compliance-Risiken, F√∂rderchancen, ROI & Visionen.</p>
  </div>
  <div id="output"></div>
</section>

<script>
document.getElementById("briefingForm").addEventListener("submit", async function(e) {
  e.preventDefault();
  const button = this.querySelector("button");
  button.disabled = true;
  button.innerText = "Analyse l√§uft‚Ä¶";

  const data = {
    name: this.name.value,
    email: this.email.value,
    branche: this.branche.value,
    selbststaendig: this.selbststaendig.value,
    massnahme: this.massnahme.value,
    bereich: this.bereich.value,
    ziel: this.ziel.value,
    frage1: this.frage1.value,
    frage2: this.frage2.value,
    frage3: this.frage3.value,
    frage4: this.frage4.value,
    frage5: this.frage5.value,
    frage6: this.frage6.value,
    frage7: this.frage7.value,
    frage8: this.frage8.value,
    frage9: this.frage9.value,
    frage10: this.frage10.value
  };

  const outputDiv = document.getElementById("output");
  outputDiv.innerHTML = "‚úÖ Anfrage gesendet...";

  try {
    const res = await fetch("https://make-ki-backend-neu-production.up.railway.app/briefing", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    });
    outputDiv.innerHTML += "<br>‚åõ GPT wertet aus...";

    const text = await res.text();
    console.log("GPT-Response:", text);

    let sections = text.split(/\\n\\n|\\r\\n\\r\\n/);
    let html = "";
    sections.forEach(s => {
      if(s.trim() !== "") {
        html += `<div class="result-block">${s.trim().replace(/\\n/g,"<br>")}</div>`;
      }
    });

    outputDiv.innerHTML = html;
    document.getElementById("resultSection").style.display = "block";
  } catch(err) {
    outputDiv.innerHTML = `<p style="color:red;">Serverfehler: ${err.message}</p>`;
    button.disabled = false;
    button.innerText = "Jetzt pr√ºfen lassen";
  }
});
</script>

</body>
</html>


<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>KI-Briefing: So nutzen Sie Ihr Potenzial</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 900px; margin: 2rem auto; padding: 1rem; background: #f9f9f9; }
    h1 { color: #333; }
    fieldset { margin-bottom: 2rem; padding: 1rem; border: 1px solid #ccc; background: #fff; }
    legend { font-weight: bold; }
    label, input, select, textarea { display: block; width: 100%; margin-bottom: 1rem; }
    button { background: #0070f3; color: white; border: none; padding: 0.75rem 1.5rem; cursor: pointer; }
    button:hover { background: #005bb5; }
    #result { margin-top: 2rem; padding: 1rem; background: #e0ffe0; border: 1px solid #ccc; }
    #loading { margin-top: 2rem; padding: 1rem; background: #fff3cd; border: 1px solid #ffeeba; display: none; }
    #error { margin-top: 2rem; padding: 1rem; background: #f8d7da; border: 1px solid #f5c6cb; display: none; color: #721c24; }
  </style>
</head>
<body>
  <h1>KI-Briefing: So nutzen Sie Ihr Potenzial</h1>

  <form id="fragebogen-formular">
    <fieldset>
      <legend>üë§ √úber dich</legend>
      <label for="name">Wie d√ºrfen wir Sie ansprechen?</label>
      <input type="text" id="name" name="name">
      <label for="unternehmen">Wie hei√üt Ihr Unternehmen? *</label>
      <input type="text" id="unternehmen" name="unternehmen" required>
      <label for="email">E-Mail-Adresse f√ºr den Report *</label>
      <input type="email" id="email" name="email" required>
      <label for="freiberuflich">Sind Sie selbstst√§ndig oder freiberuflich t√§tig?</label>
      <select id="selbststaendig" name="selbststaendig">
        <option>Ja</option>
        <option>Nein</option>
      </select>
    </fieldset>

    <fieldset>
      <legend>üè¢ Ihr Gesch√§ftsfeld</legend>
      <label for="branche">Welche Branche beschreibt Ihr T√§tigkeitsfeld am besten?</label>
      <select id="branche" name="branche">
        <option>Marketing & Werbung</option>
        <option>IT & Software</option>
        <option>Beratung</option>
        <option>Gesundheit & Soziales</option>
        <option>Handwerk</option>
        <option>Einzelhandel</option>
      </select>
      <label for="bereich">Welcher Bereich steht im Mittelpunkt?</label>
      <input type="text" id="bereich" name="bereich">
    </fieldset>

    <fieldset>
      <legend>üß† Aktueller KI-Reifegrad</legend>
      <label for="strategie">Gibt es bereits eine KI-Strategie?</label>
      <select id="strategie" name="strategie">
        <option>Ja</option>
        <option>Nein</option>
        <option>In Planung</option>
      </select>
      <label for="prozesse">Wie stark sind Ihre Prozesse digitalisiert?</label>
      <select id="prozesse" name="prozesse">
        <option>Gar nicht</option>
        <option>Teilweise automatisiert</option>
        <option>Vollst√§ndig automatisiert</option>
      </select>
      <label for="infrastruktur">Wie sieht Ihre technische Infrastruktur aus?</label>
      <input type="text" id="infrastruktur" name="infrastruktur">
      <label for="kenntnis">Wie gut kennen sich Ihre Teams mit KI aus?</label>
      <select id="knowhow" name="knowhow">
        <option>Keine Erfahrung</option>
        <option>Grundkenntnisse</option>
        <option>Erfahrung im Einsatz</option>
        <option>KI-Kompetenzteam vorhanden</option>
      </select>
    </fieldset>

    <fieldset>
      <legend>üìú Rechtliches & Verantwortung</legend>
      <label for="datenschutz">Datenschutz im Unternehmen</label>
      <select id="datenschutz" name="datenschutz">
        <option>Vollst√§ndig dokumentiert</option>
        <option>Teilweise dokumentiert</option>
        <option>Noch nicht geregelt</option>
      </select>
      <label for="verantwortung">Wer ist f√ºr KI-Themen verantwortlich?</label>
      <input type="text" id="verantwortung" name="verantwortung">
    </fieldset>

    <fieldset>
      <legend>üéØ Ziele & Herausforderungen</legend>
      <label for="ziel">Was m√∂chten Sie durch KI erreichen?</label>
      <textarea id="ziel" name="ziel"></textarea>
      <label for="herausforderung">Was hindert Sie aktuell daran?</label>
      <textarea id="herausforderung" name="herausforderung"></textarea>
      <label for="massnahmen">Gibt es erste Ma√ünahmen?</label>
      <input type="text" id="massnahmen" name="massnahmen">
      <label for="tools">Welche Tools oder Plattformen setzen Sie (testweise) ein?</label>
      <input type="text" id="tools" name="tools">
      <label for="foerderung">Gibt es F√∂rderantr√§ge oder Beratungen?</label>
      <textarea id="foerderung" name="foerderung"></textarea>
    </fieldset>

    <button type="submit">‚úÖ Analyse starten</button>
  </form>

  <div id="loading">‚è≥ Deine Eingaben werden verarbeitet...</div>
  <div id="error"></div>
  <div id="result"></div>

  <script>
    document.getElementById("fragebogen-formular").addEventListener("submit", async function(event) {
      event.preventDefault();
      document.getElementById("loading").style.display = "block";
      document.getElementById("result").style.display = "none";
      document.getElementById("error").style.display = "none";

      const formData = new FormData(this);
      const data = {};
      formData.forEach((value, key) => data[key] = value);

      try {
        const response = await fetch("https://make-ki-backend-production.up.railway.app/analyze", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });

        if (!response.ok) throw new Error("Fehler beim Senden der Daten.");

        const result = await response.json();
        const url = result.download_url || result.pdf_url?.data?.download_url || "Downloadlink nicht gefunden";

        const resultHTML = `
          <p><strong>‚úÖ Deine Eingaben wurden verarbeitet.</strong></p>
          <p><a href="${url}" target="_blank">üìÑ Vorschau deines KI-Briefings anzeigen</a></p>
        `;
        document.getElementById("result").innerHTML = resultHTML;
        document.getElementById("result").style.display = "block";
      } catch (error) {
        document.getElementById("error").textContent = "‚ùå Fehler: " + error.message;
        document.getElementById("error").style.display = "block";
      } finally {
        document.getElementById("loading").style.display = "none";
      }
    });
  </script>
</body>
</html>

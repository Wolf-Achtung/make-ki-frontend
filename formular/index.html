<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>KI-Readiness & Datenschutz-Check</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f4f7fa; color: #333; padding: 20px; }
        h1, h2 { color: #004080; }
        label { display: block; margin-top: 15px; }
        select, input[type="text"], input[type="email"] {
            width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px;
        }
        button { background: #004080; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin-top: 20px; }
        button:hover { background: #0066cc; }
        pre { background: #eee; padding: 10px; overflow: auto; }
    </style>
</head>
<body>

<h1>KI-Readiness & Datenschutz-Check</h1>
<p>Bitte füllen Sie den Fragebogen aus. Sie erhalten anschließend eine individuelle Analyse.</p>

<form id="briefingForm">
    <label>Unternehmen
        <input type="text" name="unternehmen" required>
    </label>
    <label>Name
        <input type="text" name="name" required>
    </label>
    <label>E-Mail
        <input type="email" name="email" required>
    </label>
    <label>Branche
        <select name="branche" required>
            <option value="">Bitte auswählen</option>
            <option>Marketing & Werbung</option>
            <option>IT & Software</option>
            <option>Handwerk</option>
            <option>Beratung & Coaching</option>
            <option>Handel</option>
            <option>Gesundheit</option>
            <option>Bildung & Training</option>
            <option>Recht & Steuer</option>
            <option>Sonstige</option>
        </select>
    </label>
    <label>Geplante Maßnahme
        <select name="massnahme" required>
            <option value="">Bitte auswählen</option>
            <option>KI-Tool-Integration (z.B. Agents)</option>
            <option>Automatisierung von Prozessen</option>
            <option>Datenschutz-Optimierung</option>
            <option>KI-Content-Erstellung</option>
            <option>Sonstige</option>
        </select>
    </label>
    <label>Bereich
        <select name="bereich" required>
            <option value="">Bitte auswählen</option>
            <option>Marketing</option>
            <option>Vertrieb</option>
            <option>HR</option>
            <option>IT</option>
            <option>Geschäftsführung</option>
            <option>Produktion</option>
            <option>Sonstige</option>
        </select>
    </label>
    <label>Mitarbeiterzahl
        <select name="mitarbeiterzahl" required>
            <option value="">Bitte auswählen</option>
            <option>1-5</option>
            <option>6-19</option>
            <option>20-99</option>
            <option>100+</option>
        </select>
    </label>
    <label>PLZ
        <input type="text" name="plz" required>
    </label>

    <h2>Fragen zur Datenschutz- & KI-Readiness</h2>
    <label>Haben Sie technische Maßnahmen (Firewall, Verschlüsselung etc.) umgesetzt?
        <select name="frage1" required>
            <option value="">Bitte auswählen</option>
            <option>ja</option><option>nein</option><option>noch unklar</option>
        </select>
    </label>
    <label>Gibt es regelmäßige Schulungen zu Datenschutz, KI und rechtlichen Vorgaben?
        <select name="frage2" required>
            <option value="">Bitte auswählen</option>
            <option>ja</option><option>nein</option><option>noch unklar</option>
        </select>
    </label>
    <label>Haben Sie einen Datenschutzbeauftragten benannt?
        <select name="frage3" required>
            <option value="">Bitte auswählen</option>
            <option>ja</option><option>nein</option><option>noch unklar</option>
        </select>
    </label>
    <label>Führen Sie Risikoanalysen oder Datenschutz-Folgenabschätzungen durch?
        <select name="frage4" required>
            <option value="">Bitte auswählen</option>
            <option>ja</option><option>nein</option><option>noch unklar</option>
        </select>
    </label>
    <label>Gibt es Prozesse zur Datenlöschung oder Anonymisierung?
        <select name="frage5" required>
            <option value="">Bitte auswählen</option>
            <option>ja</option><option>nein</option><option>noch unklar</option>
        </select>
    </label>
    <label>Wissen Mitarbeiter, wie bei Datenschutzverletzungen zu handeln ist?
        <select name="frage6" required>
            <option value="">Bitte auswählen</option>
            <option>ja</option><option>nein</option><option>noch unklar</option>
        </select>
    </label>
    <label>Werden Betroffenenrechte (Auskunft, Löschung) aktiv umgesetzt?
        <select name="frage7" required>
            <option value="">Bitte auswählen</option>
            <option>ja</option><option>nein</option><option>noch unklar</option>
        </select>
    </label>
    <label>Gibt es eine Dokumentation der Datenverarbeitungsprozesse?
        <select name="frage8" required>
            <option value="">Bitte auswählen</option>
            <option>ja</option><option>nein</option><option>noch unklar</option>
        </select>
    </label>
    <label>Existieren Meldepflichten und klar geregelte Abläufe bei Datenschutzvorfällen?
        <select name="frage9" required>
            <option value="">Bitte auswählen</option>
            <option>ja</option><option>nein</option><option>noch unklar</option>
        </select>
    </label>
    <label>Führen Sie regelmäßige interne Audits zu Datenschutz und KI durch?
        <select name="frage10" required>
            <option value="">Bitte auswählen</option>
            <option>ja</option><option>nein</option><option>noch unklar</option>
        </select>
    </label>
<label>Was sind aktuell Ihre größten geschäftlichen Herausforderungen?
    <textarea name="herausforderungen" rows="3" placeholder="z.B. Fachkräftemangel, Vertrieb, hohe Kosten..."></textarea>
</label>

<label>Wo möchten Sie mit Ihrem Unternehmen in 3 Jahren stehen?
    <textarea name="ziele_3jahre" rows="3" placeholder="z.B. Marktführer, neue Geschäftsfelder, KI-gestützt..."></textarea>
</label>

<label>Welche IT-Systeme oder Tools nutzen Sie derzeit?
    <textarea name="it_systeme" rows="2" placeholder="z.B. HubSpot, Lexoffice, Google Workspace..."></textarea>
</label>

<label>Nutzen Sie bereits KI-Tools? Wenn ja, welche?
    <textarea name="ki_tools" rows="2" placeholder="z.B. ChatGPT, Jasper, Midjourney..."></textarea>
</label>

<label>Welche Zielgruppen bedienen Sie?
    <textarea name="zielgruppen" rows="2" placeholder="z.B. B2B Mittelstand, lokale Endkunden..."></textarea>
</label>

<label>Gab es in den letzten Jahren Datenschutzvorfälle oder externe Audits?
    <textarea name="vorfaelle" rows="2" placeholder="z.B. Datenpanne 2023, DSGVO-Prüfung..."></textarea>
</label>

<label>Wo vermuten Sie in Ihrem Unternehmen die größten Automatisierungspotenziale?
    <textarea name="innovation_potentiale" rows="2" placeholder="z.B. Angebotserstellung, Rechnungsprüfung..."></textarea>
</label>

<label>Was wäre für Sie ein echter Durchbruch, wenn Geld & Ressourcen keine Rolle spielen würden?
    <textarea name="moonshot" rows="3" placeholder="z.B. eigene KI-App, internationaler Vertrieb..."></textarea>
</label>

    <button type="submit">Analyse starten</button>
</form>

<h2>Analyse-Ergebnisse</h2>
<div id="analysisOutput"></div>

<h2>Developer Panel (Debug JSON)</h2>
<pre id="debugOutput"></pre>

<script>
document.getElementById("briefingForm").addEventListener("submit", async function(e) {
    e.preventDefault();
    const formData = new FormData(e.target);
    const data = Object.fromEntries(formData.entries());
    const res = await fetch("https://make-ki-backend-neu-production.up.railway.app/briefing", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
    });
    const json = await res.json();

    // Developer JSON
    document.getElementById("debugOutput").textContent = JSON.stringify(json, null, 2);

    // Analyse
    let html = "";
    if (json.compliance_score !== undefined) html += `<p><strong>Score:</strong> ${json.compliance_score}/10</p>`;
    if (json.badge_level) html += `<p><strong>Badge:</strong> ${json.badge_level}</p>`;
    if (json.readiness_analysis) html += `<p><strong>Readiness:</strong> ${json.readiness_analysis}</p>`;
    if (json.compliance_analysis) html += `<p><strong>Compliance:</strong> ${json.compliance_analysis}</p>`;
    if (json.use_case_analysis) html += `<p><strong>Use Case:</strong> ${json.use_case_analysis}</p>`;
    if (json.branche_trend) html += `<p><strong>Branche Trend:</strong> ${json.branche_trend}</p>`;
    if (json.vision) html += `<p><strong>Vision:</strong> ${json.vision}</p>`;
    if (json.next_steps) html += `<p><strong>Nächste Schritte:</strong><ul>${json.next_steps.map(s => `<li>${s}</li>`).join('')}</ul></p>`;
    if (json.toolstipps) html += `<p><strong>Toolstipps:</strong> ${json.toolstipps.join(', ')}</p>`;
    if (json.foerdertipps) html += `<p><strong>Fördertipps:</strong> ${json.foerdertipps.join(', ')}</p>`;
    if (json.risiko_und_haftung) html += `<p><strong>Risiko & Haftung:</strong> ${json.risiko_und_haftung}</p>`;
    if (json.executive_summary) html += `<p><strong>Executive Summary:</strong> ${json.executive_summary}</p>`;

    document.getElementById("analysisOutput").innerHTML = html;
});
</script>

</body>
</html>

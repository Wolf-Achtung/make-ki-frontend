<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>KI-Readiness & Förderung</title>
  <style>
    body { font-family: sans-serif; max-width: 700px; margin: 2rem auto; color: #003366; }
    label { font-weight: bold; display: block; margin-top: 1rem; }
    input, select, textarea { width: 100%; padding: 0.5rem; margin-top: 0.3rem; }
    button { margin-top: 1.5rem; padding: 0.8rem 1.2rem; background: #003366; color: #fff; border: none; cursor: pointer; }
    section { margin-top: 2rem; border-top: 1px solid #ccc; padding-top: 1.5rem; }
    h2 { color: #005a9c; }
    pre { background: #f9f9f9; padding: 1rem; border-radius: 6px; }
  </style>
</head>
<body>
  <h1>Förderfähigkeit & KI-Readiness prüfen</h1>
  <form id="briefingForm">
    <label for="unternehmen">Unternehmen</label>
    <input type="text" id="unternehmen" name="unternehmen" />

    <label for="branche">Branche</label>
    <input type="text" id="branche" name="branche" />

    <label for="bereich">Bereich</label>
    <input type="text" id="bereich" name="bereich" />

    <label for="ziel">Ziele mit KI</label>
    <input type="text" id="ziel" name="ziel" />

    <label for="tools">Eingesetzte Tools</label>
    <input type="text" id="tools" name="tools" />

    <button type="submit">Briefing erstellen</button>
  </form>

  <section id="resultSection" style="display:none;">
    <h2>Dein persönliches KI-Briefing</h2>
    <div id="output"></div>
  </section>

  <script>
    document.getElementById("briefingForm").addEventListener("submit", async function(e) {
      e.preventDefault();
      const data = {
        unternehmen: this.unternehmen.value,
        branche: this.branche.value,
        bereich: this.bereich.value,
        ziel: this.ziel.value,
        tools: this.tools.value
      };
      const outputDiv = document.getElementById("output");
      outputDiv.innerHTML = "Analyse läuft ...";

      try {
        const res = await fetch("https://ki-briefing-production.up.railway.app/briefing", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });
        const json = await res.json();

        if(json.error) {
          outputDiv.innerHTML = `<p style="color:red;">Fehler: ${json.error}</p>`;
        } else {
          let html = "";
          for (const [key, value] of Object.entries(json)) {
            html += `<h3>${key.replace("_", " ").toUpperCase()}</h3><p>${value}</p>`;
          }
          outputDiv.innerHTML = html;
          document.getElementById("resultSection").style.display = "block";
        }
      } catch(err) {
        outputDiv.innerHTML = `<p style="color:red;">Serverfehler: ${err.message}</p>`;
      }
    });
  </script>
</body>
</html>
